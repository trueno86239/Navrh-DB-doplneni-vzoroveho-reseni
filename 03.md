## 3️⃣ Určení atributů + normalizace (1. a 2. NF)

### Zadání

Navrhni atributy pro:

* každou entitu,
* vztahovou entitu (pokud vznikne).

Dále:

* ověř splnění **1. normální formy**,
* ověř splnění **2. normální formy**,
* případné úpravy návrhu zdůvodni.

### Požadovaný výstup

* seznam atributů po entitách,
* krátký komentář k 1. a 2. NF,
* vše v Markdownu.

### Otázky k zamyšlení
1. Jaký význam mají v relačním modelu atributy?
2. Proč provádíme normalizaci databáze?

---

### Řešení

entitní typ: `servers`

| název atributu | význam atributu, popis     |
| :---           | :---                       |
| id             | primární klíč              |
| name           | název serveru              |
| os             | operační systém            |
| os_ver         | verze operačního systému   |

Mohli bychom uvést i další údaje, např. veřejnou IP adresu, resp. adresy, lokaci serveru atd. Informace o operačním systému, např. **Ubuntu 24.04.3 LTS**, jsou atomizovány podle 1. normální formy na **os** (Ubuntu) a **os_ver** (24.04.3 LTS). Jiným příkladem 1. normální formy je atomizace adresy na ulici, č.p., PSČ a město.

Ubuntu, stejně jako mnoho jiných Linux-like systémů, má mnoho různých verzí (serverové, pro pracovní stanice, portable atd.), proto by bylo na zvážení vytvořit samostatnou tabulku operačních systémů a jejich verzí (2. normální forma). Pro takto malý návrh to ale není nutné. 

entitní typ: `services`

| název atributu | význam atributu, popis          |
| :---           | :---                            |
| id             | primární klíč                   |
| name           | název služby / sw               |
| s_type         | typ služby - aplikační / síťová |
| s_ver          | verze služby / sw               |

Opět by bylo možné uvádět další atributy, ale pro názornost to takto postačí. Služba je opět atomizována na name, s_type a s_ver podle 1. normální formy. 

Mezi tabulkami `servers` a `services` je vztah **M : N**. V relačním modelu je pro takovýto vztah potřeba provést dekompozici na dva vztahy **1 : N** s využitím pomocné tabulky. 

vztahový typ: `services_running_on_servers`

| název atributu | význam atributu, popis                          |
| :---           | :---                                            |
| servers_id     | cizí klíč -> servers.id, složený primární klíč  |
| services_id    | cizí klíč -> services.id, složený primární klíč |

Tato pomocná tabulka `services_running_on_servers` propojuje pomocí cizích klíčů tabulky `servers` a `services`.

| `servers` |  **1:N**  | `services_running_on_servers` |  **N:1**  | `services` |
| :---      | :----:    | :---:                         |  :----:   | :---       |
| id        | -\|\|-----o< | servers_id                    |           |            |
|           |           | services_id                    | >o-----\|\|- | id         |

Pomocná tabulka může obsahovat např. podrobnější informace o konkrétní službě na konkrétním serveru, např. IPv4, IPv6, číslo portu, protokol atd.

pomocná tabulka: `services_running_on_servers`

| název atributu | význam atributu, popis                          | příklad   |
| :---           | :---                                            | :---      |
| servers_id     | cizí klíč -> servers.id, složený primární klíč  | 2         |
| services_id    | cizí klíč -> services.id, složený primární klíč | 25        |
| domain         | název domény                                    | localhost |
| IPv4           | IP adresa v4                                    | 127.0.0.1 |
| IPv6           | IP adresa v6                                    | NULL      |
| port           | číslo portu                                     | 3306      |
| protocol       | název protokolu                                 | NULL      |
| deployment_date| kdy byla služba nasazena                        | 2026-08-26|
| state          | v jakém režimu běží                             | Running   |
---

1. **Atributy** jsou jednotlivé vlastnosti entity (záznamu, n-tice). Slouží k uchování hodnot stejného významu (např. jméno, příjmení, číslo portu aj.)
2. **Normalizaci databáze** provádíme proto, aby se minimalizovala **redundance dat** (zbytečné opakování stejných dat) a zabránilo se vzniku anomálií při vkládání, aktualizaci a mazání záznamů. Zároveň zajišťuje logickou strukturu dat, která zvyšuje **konzistenci** (vzájemný soulad dat) a dlouhodobou udržovatelnost databáze.
 
